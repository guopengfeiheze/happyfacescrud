<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:f="http://java.sun.com/jsf/core"
	    xmlns:p="http://primefaces.org/ui"
		xmlns:c="http://java.sun.com/jsp/jstl/core">

	<ui:composition>
	
		<!-- No is is set. -->
	    <c:if test="${empty id}">
	        <c:set var="id" value="popupId" />
	    </c:if>
	    <c:if test="${empty rendered}">
	        <c:set var="rendered" value="true" />
	    </c:if>
	    <c:if test="${empty showWhenRendered}">
	        <c:set var="showWhenRendered" value="false" />
	    </c:if>
	    <c:set var="list"
               value="list" />
	
	    	<p:dialog id="#{id}" keepVisualState="true" autosized="true" showWhenRendered="${showWhenRendered}" rendered="${rendered}">
				<f:facet name="header">
			      <h:outputText value="#{header}" />
			    </f:facet>
			    <f:facet name="controls">
			      <h:panelGroup>
			        <h:graphicImage value="/img/close.png" style="cursor:pointer" id="#{id}hidelink"/>
			      </h:panelGroup>
			    </f:facet>
				<h:form>
	    		<h:panelGrid id="#{id}searchFormPanel" columns="2">
	    			<c:if test="${not empty searchField1}">
						<p:outputLabel for="#{searchField1}" value="#{searchField1Label}" />  
						<p:inputText id="#{searchField1}" value="#{filtersMap[searchField1]}" />
					</c:if>
	    			<c:if test="${not empty searchField2}">
		    			<p:outputLabel for="#{searchField2}" value="#{searchField2Label}" />  
						<p:inputText id="#{searchField2}" value="#{filtersMap[searchField2]}" />
					</c:if>
	    			<c:if test="${not empty searchField3}">
		    			<p:outputLabel for="#{searchField3}" value="#{searchField3Label}" />  
						<p:inputText id="#{searchField3}" value="#{filtersMap[searchField3]}" />
					</c:if>
				</h:panelGrid>
				 <c:if test="${empty showSearchButton}">
	        		<c:set var="showSearchButton" value="true" />
	    		</c:if>
				<c:if test="${showSearchButton}">
					<div class="actionButtons">
						<p:commandButton id="#{id}buttonSearch" update="#{id}datatable" value="#{messages['action.search']}" action="#{backingBean[list]}" />
					</div>
	    		</c:if>
	    		<p:dataTable id="#{id}datatable" value="#{dataModel}" var="entity">
						<c:if test="${not empty column1}">
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{column1Label}"/>
						        </f:facet>
						        <h:outputText value="#{entity[column1]}" />
							</p:column>
						</c:if>
						<c:if test="${not empty column2}">
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{column2Label}"/>
						        </f:facet>
						        <h:outputText value="#{entity[column2]}" />
							</p:column>
						</c:if>
						<c:if test="${not empty column3}">
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{column3Label}"/>
						        </f:facet>
						        <h:outputText value="#{entity[column3]}" />
							</p:column>
						</c:if>
						<c:if test="${not empty column4}">
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{column4Label}"/>
						        </f:facet>
						        <h:outputText value="#{entity[column4]}" />
							</p:column>
						</c:if>
						<c:if test="${not empty column5}">
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{column5Label}"/>
						        </f:facet>
						        <h:outputText value="#{entity[column5]}" />
							</p:column>
						</c:if>
						<c:if test="${not empty column6}">
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{column6Label}"/>
						        </f:facet>
						        <h:outputText value="#{entity[column6]}" />
							</p:column>
						</c:if>
						<c:if test="${not empty column7}">
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{column7Label}"/>
						        </f:facet>
						        <h:outputText value="#{entity[column7]}" />
							</p:column>
						</c:if>
						<h:column styleClass="action">
							<ui:insert />
				        </h:column>
				</p:dataTable>
				</h:form>
			</p:dialog>
		
    </ui:composition>

</html>